<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="slots-generator-styles.css">
    <title>Slots Generator</title>
    <style>
        .item-controls button {
            padding: 5px 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Slots Generator</h1>

        <h2>Select Items:</h2>
        <label>
            <input type="checkbox" id="list1-checkbox"> Hacksaw
        </label>
        <label>
            <input type="checkbox" id="list2-checkbox"> Pragmatic
        </label>
        <label>
            <input type="checkbox" id="list3-checkbox"> Play n' Go
        </label>
        <label>
            <input type="checkbox" id="list4-checkbox"> Nolimit City
        </label>
        <label>
            <input type="checkbox" id="list5-checkbox"> Thunderkick
        </label>
        <label>
            <input type="checkbox" id="list6-checkbox"> Relax Gaming
        </label>
        <label>
            <input type="checkbox" id="list7-checkbox"> Quickspin
        </label>

        <h2>Generate Random Items:</h2>
        <label for="num-items">Number of Items:</label>
        <input type="number" id="num-items" min="1" value="1">
        <button id="generate-button">Generate</button>

        <h2>Generated Items:</h2>
        <ul id="generated-list"></ul>

        <h2>Selected Items:</h2>
        <ul id="selected-list"></ul>

        <button id="add-selected-button">+</button>
    </div>

    <button onclick="goBack()">Go Back</button>

    <script>
        function goBack() {
            window.history.back();
        }

        function createItemControls(listItem) {
            const removeButton = document.createElement('button');
            removeButton.textContent = '-';
            removeButton.className = 'item-controls-button';
            removeButton.addEventListener('click', function () {
                const listItem = this.parentElement;
                const generatedList = document.getElementById('generated-list');
                const selectedList = document.getElementById('selected-list');
                if (listItem.parentElement === generatedList) {
                    // Remove the item from generated list and generate a new random item
                    generatedList.removeChild(listItem);
                    generateRandomItem();
                } else if (listItem.parentElement === selectedList) {
                    // Remove the item from selected list
                    selectedList.removeChild(listItem);
                }
            });

            const addButton = document.createElement('button');
            addButton.textContent = '+';
            addButton.className = 'item-controls-button';
            addButton.addEventListener('click', function () {
                const listItem = this.parentElement;
                moveItemToGeneratedList(listItem);
            });

            const itemControls = document.createElement('div');
            itemControls.className = 'item-controls';
            itemControls.appendChild(removeButton);
            itemControls.appendChild(addButton);

            return itemControls;
        }

        function moveItemToGeneratedList(listItem) {
            const selectedList = document.getElementById('selected-list');
            selectedList.removeChild(listItem);

            const generatedList = document.getElementById('generated-list');
            listItem.getElementsByClassName('item-controls')[0].remove();
            generatedList.appendChild(listItem);
        }

        function generateRandomItem() {
            const generatedList = document.getElementById('generated-list');
            const selectedLists = [];
            const checkboxes = [
                document.getElementById('list1-checkbox'),
                document.getElementById('list2-checkbox'),
                document.getElementById('list3-checkbox'),
                document.getElementById('list4-checkbox'),
                document.getElementById('list5-checkbox'),
                document.getElementById('list6-checkbox'),
                document.getElementById('list7-checkbox')
            };

            for (let i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    const list = loadList(`list${i + 1}.txt`);
                    selectedLists.push(...list);
                }
            }

            if (selectedLists.length > 0) {
                const randomIndex = Math.floor(Math.random() * selectedLists.length);
                const randomItem = selectedLists[randomIndex];

                const listItem = document.createElement('li');
                listItem.textContent = `Random Number: ${randomIndex}, Item: ${randomItem}`;
                const itemControls = createItemControls(listItem);
                listItem.appendChild(itemControls);
                generatedList.appendChild(listItem);
            }
        }

        document.getElementById('generate-button').addEventListener('click', function () {
            const numItems = parseInt(document.getElementById('num-items').value);
            for (let i = 0; i < numItems; i++) {
                generateRandomItem();
            }
        });

        document.getElementById('add-selected-button').addEventListener('click', function () {
            const selectedList = document.getElementById('selected-list');
            const selectedItems = selectedList.getElementsByTagName('li');
            if (selectedItems.length > 0) {
                const randomIndex = Math.floor(Math.random() * selectedItems.length);
                const randomItem = selectedItems[randomIndex];
                moveItemToGeneratedList(randomItem);
            }
        });

        async function loadList(filename) {
            try {
                const response = await fetch(filename);
                if (!response.ok) {
                    throw new Error('File not found');
                }
                const text = await response.text();
                return text.split('\n').filter(item => item.trim() !== ''); // Split by newline and remove empty lines
            } catch (error) {
                console.error('Error loading the file:', error);
                return [];
            }
        }
    </script>
</body>
</html>
