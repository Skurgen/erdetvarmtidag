<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="slots-generator-styles.css">
    <title>Slots Generator</title>
</head>
<body>
    <div class="container">
        <h1>Slots Generator</h1>

        <h2>Select Items:</h2>
        <!-- Checkbox labels will be loaded dynamically -->
        <!-- Add the data-source attribute to specify the data source file for each checkbox -->
        <label><input type="checkbox" id="list1-checkbox" data-source="list1.txt"> Loading...</label>
        <label><input type="checkbox" id="list2-checkbox" data-source="list2.txt"> Loading...</label>
        <label><input type="checkbox" id="list3-checkbox" data-source="list3.txt"> Loading...</label>
        <label><input type="checkbox" id="list4-checkbox" data-source="list4.txt"> Loading...</label>
        <label><input type="checkbox" id="list5-checkbox" data-source="list5.txt"> Loading...</label>
        <label><input type="checkbox" id="list6-checkbox" data-source="list6.txt"> Loading...</label>
        <label><input type="checkbox" id="list7-checkbox" data-source="list7.txt"> Loading...</label>

        <h2>Generate Random Items:</h2>
        <label for="num-items">Number of Items:</label>
        <input type="number" id="num-items" min="1" value="1">
        <button id="generate-button">Generate</button>

        <div class="lists-container">
            <div class="items-list">
                <h2>Generated Items:</h2>
                <ul id="generated-list"></ul>
            </div>
            <div class="items-list">
                <h2>Bonus List:</h2>
                <ul id="bonus-list">
                    <!-- Bonus items (if needed) can be added here -->
                </ul>
            </div>
        </div>
    </div>

    <button onclick="goBack()">Go Back</button>

    <script>
        function goBack() {
            window.history.back();
        }

        const bonusItems = [];

        document.getElementById('generate-button').addEventListener('click', function () {
            // Create a new list for selected items
            const selectedItems = [];
            const selectedLists = [];

            // Load checkbox labels from text files
            for (let i = 1; i <= 7; i++) {
                const checkbox = document.getElementById(`list${i}-checkbox`);
                const dataSource = checkbox.getAttribute('data-source');

                fetch(dataSource)
                    .then(response => response.text())
                    .then(data => {
                        checkbox.nextElementSibling.textContent = data; // Update label text
                        selectedLists.push(data.split('\n')); // Create an array of items
                    })
                    .catch(error => console.error(`Error loading ${dataSource}: ${error}`));
            }

            const numItems = parseInt(document.getElementById('num-items').value);
            if (selectedLists.length > 0) {
                for (let i = 0; i < numItems; i++) {
                    const randomListIndex = Math.floor(Math.random() * selectedLists.length);
                    const randomList = selectedLists[randomListIndex];
                    const randomIndex = Math.floor(Math.random() * randomList.length);
                    const randomItem = randomList[randomIndex].trim();
                    selectedItems.push(randomItem);
                }
                // Display selected items in the Generated Items list
                updateGeneratedList(selectedItems);
            }
        });

        function updateGeneratedList(items) {
            const generatedList = document.getElementById('generated-list');
            generatedList.innerHTML = '';

            for (const item of items) {
                const listItem = document.createElement('li');
                listItem.textContent = `Generated: ${item}`;

                const addButton = document.createElement('button');
                addButton.textContent = '+';
                addButton.addEventListener('click', function () {
                    // Add the item to the Bonus List (if needed)
                    bonusItems.push(item);
                    updateBonusList();

                    // Generate a new random item from the list and replace the current item
                    const newRandomList = selectedLists[0];
                    if (newRandomList.length > 0) {
                        const newRandomIndex = Math.floor(Math.random() * newRandomList.length);
                        const newRandomItem = newRandomList[newRandomIndex].trim();
                        listItem.textContent = `Generated: ${newRandomItem}`;
                    }
                });

                listItem.appendChild(addButton);
                generatedList.appendChild(listItem);
            }
        }

        function updateBonusList() {
            const bonusList = document.getElementById('bonus-list');
            bonusList.innerHTML = '';

            for (let i = 0; i < bonusItems.length; i++) {
                const bonusItem = bonusItems[i];
                const bonusListItem = document.createElement('li');
                bonusListItem.textContent = `Bonus: ${bonusItem}`;

                const minusButton = document.createElement('button');
                minusButton.textContent = '-';
                minusButton.addEventListener('click', function () {
                    // Remove the item from the Bonus List
                    bonusItems.splice(i, 1);
                    updateBonusList();
                });

                bonusListItem.appendChild(minusButton);
                bonusList.appendChild(bonusListItem);
            }
        }
    </script>
</body>
</html>
